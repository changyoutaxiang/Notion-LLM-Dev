# é…ç½®å¡«å†™æŒ‡å— ğŸ“

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ æ­£ç¡®å¡«å†™ `config.json` é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿ç¨‹åºèƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. å¤åˆ¶é…ç½®æ–‡ä»¶
```bash
cp config.example.json config.json
```

### 2. è·å–å¿…éœ€çš„APIå¯†é’¥

#### ğŸ“ Notion APIå¯†é’¥
1. è®¿é—® [Notionå¼€å‘è€…é¡µé¢](https://www.notion.so/my-integrations)
2. ç‚¹å‡» "New integration" åˆ›å»ºæ–°çš„é›†æˆ
3. å¡«å†™é›†æˆåç§°ï¼ˆå¦‚ï¼šnotion-llmï¼‰
4. å¤åˆ¶ç”Ÿæˆçš„APIå¯†é’¥ï¼ˆä»¥ `secret_` å¼€å¤´ï¼‰
5. åœ¨ä½ çš„Notionæ•°æ®åº“é¡µé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ "Share" æŒ‰é’®
6. é‚€è¯·åˆšåˆ›å»ºçš„é›†æˆåˆ°æ•°æ®åº“

#### ğŸŒ OpenRouter APIå¯†é’¥
1. è®¿é—® [OpenRouterå®˜ç½‘](https://openrouter.ai/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. å‰å¾€ [API Keysé¡µé¢](https://openrouter.ai/keys)
4. åˆ›å»ºæ–°çš„APIå¯†é’¥
5. å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥ï¼ˆä»¥ `sk-or-` å¼€å¤´ï¼‰

#### ğŸ—‚ï¸ Notionæ•°æ®åº“ID
1. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„Notionæ•°æ®åº“é¡µé¢
2. å¤åˆ¶URLä¸­çš„æ•°æ®åº“IDï¼š
   ```
   https://www.notion.so/your-database-name-[æ•°æ®åº“ID]?v=...
   ```
3. æ•°æ®åº“IDæ˜¯32ä½å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š`1234567890abcdef1234567890abcdef`

### 3. å¡«å†™é…ç½®æ–‡ä»¶

æ‰“å¼€ `config.json` æ–‡ä»¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼å¡«å†™ï¼š

```json
{
  "notion": {
    "api_key": "secret_your_actual_notion_api_key",
    "database_id": "your_actual_database_id",
    "input_property_name": "è¾“å…¥",
    "output_property_name": "å›å¤",
    "status_property_name": "çŠ¶æ€",
    "status_in_progress": "In progress",
    "status_done": "Done",
    "template_property_name": "æ¨¡æ¿é€‰æ‹©",
    "knowledge_base_property_name": "èƒŒæ™¯",
    "model_property_name": "æ¨¡å‹",
    "title_property_name": "æ ‡é¢˜",
    "knowledge_base_path": "knowledge_base",
    "template_database_id": "å¯é€‰ï¼šæ¨¡æ¿åº“æ•°æ®åº“ID",
    "template_name_property": "æ¨¡æ¿åç§°",
    "template_category_property": "åˆ†ç±»",
    "template_prompt_property": "æç¤ºè¯",
    "template_description_property": "æè¿°",
    "template_status_property": "çŠ¶æ€"
  },
  "openrouter": {
    "api_key": "sk-or-your_actual_openrouter_api_key",
    "model": "anthropic/claude-3.5-sonnet"
  },
  "settings": {
    "check_interval": 120,
    "max_retries": 3,
    "request_timeout": 30,
    "system_prompt": "ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œè¯·è®¤çœŸå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚è¯·ç”¨ä¸­æ–‡å›å¤ã€‚",
    "require_template_selection": true,
    "auto_generate_title": true,
    "title_max_length": 20,
    "title_min_length": 10,
    "auto_sync_templates": true,
    "sync_on_startup": true,
    "sync_interval_hours": 24,
    "model_mapping": {
      "Gemini 2.5 pro": "google/gemini-2.5-pro",
      "Gemini 2.5 flash": "google/gemini-2.5-flash",
      "Claude 4 sonnet": "anthropic/claude-sonnet-4",
      "Chatgpt 4.1": "openai/gpt-4.1",
      "Chatgpt O3": "openai/o3",
      "Deepseek R1": "deepseek/deepseek-r1-0528",
      "Deepseek V3": "deepseek/deepseek-chat-v3-0324"
    }
  },
  "knowledge_search": {
    "enable_smart_rag": false,
    "max_snippets": 5,
    "similarity_threshold": 0.3
  }
}
```

### 4. éªŒè¯é…ç½®
å¡«å†™å®Œæˆåï¼Œè¿è¡ŒéªŒè¯å·¥å…·ï¼š
```bash
python validate_config.py
```

## ğŸ—ƒï¸ Notionæ•°æ®åº“ç»“æ„

ç¡®ä¿ä½ çš„Notionæ•°æ®åº“åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µå | å­—æ®µç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| æ ‡é¢˜ | Title | è‡ªåŠ¨ç”Ÿæˆçš„æ ‡é¢˜ |
| è¾“å…¥ | Text | ç”¨æˆ·è¾“å…¥çš„å†…å®¹ |
| å›å¤ | Text | LLMç”Ÿæˆçš„å›å¤ |
| çŠ¶æ€ | Select | å¤„ç†çŠ¶æ€ï¼ˆIn progress, Doneï¼‰ |
| æ¨¡æ¿é€‰æ‹© | Select | é€‰æ‹©çš„æç¤ºè¯æ¨¡æ¿ |
| èƒŒæ™¯ | Multi-select | çŸ¥è¯†åº“æ ‡ç­¾ |
| æ¨¡å‹ | Select | ä½¿ç”¨çš„LLMæ¨¡å‹ |

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: APIå¯†é’¥æ— æ•ˆæ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥å¯†é’¥æ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆæ³¨æ„ä¸è¦åŒ…å«ç©ºæ ¼ï¼‰
2. ç¡®è®¤Notioné›†æˆå·²ç»è¢«é‚€è¯·åˆ°æ•°æ®åº“
3. æ£€æŸ¥OpenRouterè´¦å·ä½™é¢æ˜¯å¦å……è¶³

### Q: æ•°æ®åº“IDæ‰¾ä¸åˆ°ï¼Ÿ
A: 
1. ç¡®ä¿URLä¸­çš„IDæ˜¯32ä½å­—ç¬¦ä¸²
2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦ä¸ºè¡¨æ ¼è§†å›¾
3. ç¡®è®¤ä½ æœ‰æ•°æ®åº“çš„ç¼–è¾‘æƒé™

### Q: é…ç½®éªŒè¯å¤±è´¥ï¼Ÿ
A: 
1. æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æ‰€æœ‰å¿…éœ€å­—æ®µéƒ½å·²å¡«å†™
3. æ£€æŸ¥æ•°å€¼èŒƒå›´æ˜¯å¦åˆç†

### Q: ç¨‹åºè¿è¡Œå‡ºé”™ï¼Ÿ
A: 
1. è¿è¡Œé…ç½®éªŒè¯å·¥å…·
2. æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¿¡æ¯

## ğŸ“Š é…ç½®é¡¹è¯´æ˜

### åŸºç¡€è®¾ç½®
- `check_interval`: æ£€æŸ¥æ–°æ¶ˆæ¯çš„é—´éš”ï¼ˆç§’ï¼‰
- `max_retries`: å¤±è´¥é‡è¯•æ¬¡æ•°
- `request_timeout`: è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

### æ ‡é¢˜ç”Ÿæˆ
- `auto_generate_title`: æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜
- `title_max_length`: æ ‡é¢˜æœ€å¤§é•¿åº¦
- `title_min_length`: æ ‡é¢˜æœ€å°é•¿åº¦

### æ¨¡æ¿åŒæ­¥
- `auto_sync_templates`: æ˜¯å¦è‡ªåŠ¨åŒæ­¥æ¨¡æ¿
- `sync_on_startup`: å¯åŠ¨æ—¶æ˜¯å¦åŒæ­¥
- `sync_interval_hours`: åŒæ­¥é—´éš”ï¼ˆå°æ—¶ï¼‰

### çŸ¥è¯†åº“
- `enable_smart_rag`: æ˜¯å¦å¯ç”¨æ™ºèƒ½æ£€ç´¢
- `max_snippets`: æœ€å¤§æ£€ç´¢ç‰‡æ®µæ•°
- `similarity_threshold`: ç›¸ä¼¼åº¦é˜ˆå€¼

## ğŸš€ å®Œæˆé…ç½®

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. **æœ¬åœ°ä½¿ç”¨**
   ```bash
   python main.py
   ```

2. **äº‘ç«¯éƒ¨ç½²**
   ```bash
   python cloud_main.py
   ```

3. **ç›´æ¥æµ‹è¯•**
   ```bash
   python validate_config.py
   ```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥çœ‹åˆ° "ğŸ‰ æ‰€æœ‰é…ç½®éªŒè¯é€šè¿‡ï¼" çš„æ¶ˆæ¯ã€‚

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. å…ˆè¿è¡Œé…ç½®éªŒè¯å·¥å…·
2. æ£€æŸ¥æ–‡æ¡£ä¸­çš„å¸¸è§é—®é¢˜
3. æŸ¥çœ‹ç¨‹åºæ—¥å¿—è¾“å‡º
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“ 